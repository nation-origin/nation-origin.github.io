{"version":3,"sources":["providers/Web3.js","components/helper/BscRPCHelper.js","providers/NationContract.js","components/Wallet/WalletMenu.js","components/Layout/Layout.js","Providers.js","components/Card/Card.js","components/List/List.js","views/profile.js","components/Filter/Filter.js","views/showroom.js","views/guide/WalletGuide.js","views/guide/BscGuide.js","Routes.js"],"names":["Web3Context","React","createContext","getWeb3","a","window","ethereum","web3","Web3","enable","console","log","provider","providers","HttpProvider","Web3Provider","children","useState","undefined","setweb3","account","setaccount","disconnect","useCallback","connect","instance","eth","getAccounts","accounts","length","Provider","value","useWeb3","useContext","BSCMainNetRPCHelper","NationContractContext","NationContractProvider","setinstance","isBsc","setisBsc","useEffect","net","getId","networkId","deployedNetwork","NationContract","networks","Contract","abi","address","createInstance","WalletMenu","navigate","useNavigate","anchorEl","setAnchorEl","open","Boolean","handleClose","className","onClick","event","currentTarget","Menu","id","onClose","MenuListProps","MenuItem","Layout","to","Providers","MetadataProvider","SPECIAL_ATTRIBUTE","Card","item","isSpecial","useMemo","attributes","some","attr","isSpecialCard","src","image","alt","name","description","List","allItems","pageSize","items","setitems","hasMore","sethasMore","slice","dataLength","next","append","i","push","loader","endMessage","style","textAlign","map","index","Profile","nationContract","md","useMetadata","ownedItems","setownedItems","methods","balanceOf","call","count","idx","Promise","all","tokenOfOwnerByIndex","tokenIds","tokenId","fetchOwned","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","width","color","getStyles","attrName","theme","fontWeight","indexOf","typography","fontWeightRegular","fontWeightMedium","AttributeGroupFilter","groupName","onChange","useTheme","setattrName","FormControl","sx","m","InputLabel","Select","labelId","multiple","target","attrs","split","group","input","OutlinedInput","label","renderValue","selected","Box","display","flexWrap","gap","Chip","rarity","toFixed","ShowRoom","collection","filters","setfilters","forEach","attrsMap","attrGroups","Object","keys","filter","key","onFilterChange","attributeMatched","sort","b","WalletGuide","BscGuide","CustomRoutes","basename","exact","path","element","Home"],"mappings":"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","file":"static/js/3.c1529ace.chunk.js","sourcesContent":["import React from 'react';\nimport Web3 from 'web3';\n\nconst Web3Context = React.createContext({});\n\n\nasync function getWeb3() {\n    if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n            // Request account access if needed\n            await window.ethereum.enable();\n            // Accounts now exposed\n\n            return web3\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    // Legacy dapp browsers...\n    else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        return web3\n    }\n    // Fallback to localhost; use dev console port by default...\n    else {\n        const provider = new Web3.providers.HttpProvider(\n            \"http://127.0.0.1:8545\"\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        return web3\n    }\n}\n\n\nexport const Web3Provider = ({ children }) => {\n    const [web3, setweb3] = React.useState(undefined);\n    const [account, setaccount] = React.useState(undefined);\n\n\n    const disconnect = React.useCallback(() => {\n        if (web3) {\n            setweb3(undefined);\n            setaccount(undefined);\n        }\n    }, [setweb3, web3])\n\n    const connect = React.useCallback(async () => {\n        if (web3) { return }\n        const instance = await getWeb3();\n        const accounts = await instance.eth.getAccounts();\n        if (accounts.length > 0) {\n            setaccount(accounts[0])\n        }\n        setweb3(instance);\n\n    }, [web3, setweb3, setaccount])\n\n    return (\n        <>\n            <Web3Context.Provider value={{ web3, connect, disconnect, account }}>\n                {children}\n            </Web3Context.Provider>\n        </>\n    )\n}\n\nexport const useWeb3 = () => {\n    return React.useContext(Web3Context);\n}","import React from 'react';\n\n\n\nexport const BSCMainNetRPCHelper = () => {\n    return (\n        <>\n            <h1>如何在Metamask中添加BSC主网RPC？</h1>\n        </>\n    )\n}","import React from 'react';\nimport { useWeb3 } from './Web3';\nimport NationContract from '../contracts/Nation.json';\nimport { BSCMainNetRPCHelper } from '../components/helper/BscRPCHelper';\n\nconst NationContractContext = React.createContext(undefined);\n\n\nexport const NationContractProvider = ({ children }) => {\n\n    const {web3} = useWeb3();\n\n    const [instance, setinstance] = React.useState(undefined);\n    const [isBsc, setisBsc] = React.useState(true);\n    React.useEffect(() => {\n        if (!web3) {return}\n        async function createInstance() {\n            // Get the contract instance.\n            const networkId = await web3.eth.net.getId();\n            setisBsc(networkId === 97 || networkId === 56 || networkId === 1337);\n\n            const deployedNetwork = NationContract.networks[networkId];\n            const instance = new web3.eth.Contract(\n                NationContract.abi,\n                deployedNetwork && deployedNetwork.address,\n            );\n            setinstance(instance)\n        }\n\n        createInstance()\n    }, [web3])\n\n\n    return (\n        <NationContractContext.Provider value={instance}>\n            {\n                isBsc\n                    ?\n                    children\n                    :\n                    <BSCMainNetRPCHelper />\n            }\n        </NationContractContext.Provider>\n    )\n}\n\nexport const useNationContract = () => {\n    return React.useContext(NationContractContext);\n}","import React from 'react';\nimport Menu from '@mui/material/Menu';\nimport MenuItem from '@mui/material/MenuItem';\nimport { useWeb3 } from '../../providers/Web3';\nimport { useNavigate } from 'react-router-dom';\nimport './WalletMenu.css';\n\n\nexport const WalletMenu = () => {\n  const { connect, disconnect, account } = useWeb3();\n  const navigate = useNavigate();\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const menu = () => {\n    return (\n      <>\n        <Menu\n          id=\"basic-menu\"\n          anchorEl={anchorEl}\n          open={open}\n          onClose={handleClose}\n          MenuListProps={{\n            'aria-labelledby': 'basic-button',\n          }}\n        >\n          <MenuItem onClick={() => navigate('/profile')}>我的收藏</MenuItem>\n          <MenuItem onClick={disconnect}>断开连接</MenuItem>\n        </Menu>\n      </>\n    )\n  }\n\n\n  return (\n    <div className=\"wallet-menu\">\n      {\n        account ? <>\n          <button className=\"wallet-connect-btn\" onClick={handleClick}>{account}</button>\n          {menu()}\n        </>\n          :\n          <button className=\"wallet-connect-btn\" onClick={connect}>连接钱包</button>\n      }\n    </div>\n  )\n}","import React from 'react';\nimport { WalletMenu } from '../Wallet/WalletMenu';\nimport { Link } from 'react-router-dom';\n\nimport './Layout.css';\n\nexport const Layout = ({ children }) => {\n\treturn (\n\t\t<>\n\t\t\t<nav className=\"nav\">\n\t\t\t\t<Link to=\"/\"><h2>Nation Origins</h2></Link>\n\t\t\t\t<WalletMenu />\n\t\t\t</nav>\n\t\t\t<main>\n\t\t\t\t{children}\n\t\t\t</main>\n\t\t</>\n\t)\n}","import React from 'react';\nimport { Web3Provider } from './providers/Web3';\nimport { NationContractProvider } from './providers/NationContract';\nimport { MetadataProvider } from './providers/MetadataProvider';\nimport { Layout } from './components/Layout/Layout';\n\nfunction Providers({ children }) {\n  return (\n    <>\n      <MetadataProvider>\n        <Web3Provider>\n          <NationContractProvider>\n            <Layout>\n              {children}\n            </Layout>\n          </NationContractProvider>\n        </Web3Provider>\n      </MetadataProvider>\n    </>\n  );\n}\n\nexport default Providers;\n","import React from 'react';\nimport { useNationContract } from '../../providers/NationContract';\nimport './Card.css';\n\nconst SPECIAL_ATTRIBUTE = {\n  '无政府主义': 1,\n  '脑机': 1,\n  '飞碟残骸': 1,\n  '幸运': 1,\n  '比特币': 1,\n  '太空旅行': 1,\n  '熔岩地貌': 1,\n  '风蚀地貌': 1,\n  '冰川地貌': 1,\n};\n\nfunction isSpecialCard(item) {\n  return item.attributes.some((attr) => {\n    return SPECIAL_ATTRIBUTE[attr.value] > 0\n  })\n}\n\nexport const Card = ({ item }) => {\n\n  const isSpecial = React.useMemo(() => {\n    return isSpecialCard(item)\n  }, [item])\n\n  // React.useEffect(() => {\n\n  //   async function getToken() {\n  //     if (!contract) {\n  //       console.log('contract not inited');\n  //       return\n  //     }\n\n  //     const res = await contract.methods.tokenURI(tokenId).call();\n\n  //     const data = Buffer.from(res.replace('data:application/json;base64,', ''), 'base64').toString();\n  //     setitem(JSON.parse(data));\n  //   }\n\n  //   getToken()\n  // }, [contract, tokenId])\n\n\n  return (\n    <>\n      {\n        item &&\n\n        <div className=\"card\">\n          <img src={item.image} alt={item.name} />\n          <div className=\"card-meta\">\n            <h2>{item.name}</h2>\n            <p>{item.description}</p>\n            \n          </div>\n          {isSpecial && <img className=\"special\" src=\"fire.gif\" alt=\"special\" />}\n        </div>\n      }\n\n    </>\n  )\n}","import React from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { Card } from '../Card/Card';\n\nimport './List.css';\n\nexport const List = ({ allItems, pageSize = 20 }) => {\n    const [items, setitems] = React.useState([]);\n    const [hasMore, sethasMore] = React.useState(true);\n\n    React.useEffect(() => {\n        setitems(allItems.slice(0, pageSize));\n        sethasMore(allItems.length > pageSize);\n    }, [allItems, pageSize])\n\n    const fetchMoreData = () => {\n        if (items.length >= allItems.length) {\n            sethasMore(false);\n            return\n        }\n\n        let append = [];\n        for (let i = items.length; i < allItems.length && i < items.length + pageSize; i++) {\n            append.push(allItems[i]);\n        }\n\n        setitems([...items, ...append])\n    }\n\n    return (\n        <>\n            <InfiniteScroll\n                dataLength={items.length}\n                next={fetchMoreData}\n                hasMore={hasMore}\n                loader={<h4>Loading...</h4>}\n                endMessage={\n                    <p style={{ textAlign: \"center\" }}>\n                        <b></b>\n                    </p>\n                }\n            >\n                <div className=\"card-box\">\n                    {items.map((item, index) => <Card key={index} item={item} />)}\n                </div>\n            </InfiniteScroll>\n        </>\n    )\n}","import React from 'react';\nimport { useMetadata } from '../providers/MetadataProvider';\nimport { useNationContract } from '../providers/NationContract';\nimport { useWeb3 } from '../providers/Web3';\nimport { useNavigate } from 'react-router';\nimport { List } from '../components/List/List';\n\nexport const Profile = () => {\n    const { account } = useWeb3();\n    const navigate = useNavigate();\n    const nationContract = useNationContract();\n    const md = useMetadata();\n    const [ownedItems, setownedItems] = React.useState([]);\n\n\n\n    React.useEffect(() => {\n\n        async function fetchOwned() {\n            let count = await nationContract.methods.balanceOf(account).call();\n            let idx = [];\n            for (let i = 0; i < count; i++) {\n                idx.push(i);\n            }\n\n            let tokenIds = await Promise.all(\n                idx.map(i => {\n                    return nationContract.methods.tokenOfOwnerByIndex(account, i).call()\n                })\n            );\n\n\n            let items = tokenIds.map(tokenId => {\n                return md.items[tokenId - 1]\n            });\n\n            setownedItems(items)\n        }\n\n        if (!account) {\n            navigate(\"/\");\n        }\n\n        if (!account || !nationContract || !md) {\n            return\n        }\n\n\n        fetchOwned()\n\n    }, [account, nationContract, navigate, md])\n\n    return (\n        <>\n            {account && <List allItems={ownedItems} />}\n        </>\n    )\n}\n","import * as React from 'react';\nimport { useTheme } from '@mui/material/styles';\nimport Box from '@mui/material/Box';\nimport OutlinedInput from '@mui/material/OutlinedInput';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport Chip from '@mui/material/Chip';\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250,\n      color: '#000'\n    },\n  },\n};\n\nfunction getStyles(name, attrName, theme) {\n  return {\n    fontWeight:\n      attrName.indexOf(name) === -1\n        ? theme.typography.fontWeightRegular\n        : theme.typography.fontWeightMedium,\n  };\n}\n\nexport const AttributeGroupFilter = ({ groupName, attributes, onChange }) => {\n  const theme = useTheme();\n  const [attrName, setattrName] = React.useState([]);\n\n\n  const handleChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    const attrs = typeof value === 'string' ? value.split(',') : value;\n    onChange && onChange({ group: groupName, attrs })\n    setattrName(attrs);\n  };\n\n  return (\n    <div>\n      <FormControl sx={{ m: 1, width: 300 }}>\n        <InputLabel id=\"demo-multiple-chip-label\">{groupName}</InputLabel>\n        <Select\n          labelId=\"demo-multiple-chip-label\"\n          id=\"demo-multiple-chip\"\n          multiple\n          value={attrName}\n          onChange={handleChange}\n          input={<OutlinedInput id=\"select-multiple-chip\" label=\"参数\" />}\n          renderValue={(selected) => (\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n              {selected.map((value) => (\n                <Chip key={value} label={value} />\n              ))}\n            </Box>\n          )}\n          MenuProps={MenuProps}\n        >\n          {attributes.map((attr) => (\n            <MenuItem\n              key={attr.value}\n              value={attr.value}\n              style={getStyles(attr.value, attrName, theme)}\n            >\n              {`${attr.value} - 稀有度${(attr.rarity * 100).toFixed(2)}%`}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    </div>\n  );\n}","import React from 'react';\nimport { List } from '../components/List/List';\nimport { useMetadata } from '../providers/MetadataProvider';\nimport { AttributeGroupFilter } from '../components/Filter/Filter';\n\nimport './showroom.css';\n\nfunction attributeMatched(item, filters) {\n\n    for (const group of Object.keys(filters)) {\n        for (const value of filters[group]) {\n            if (!item.attrsMap[value]) { return false }\n        }\n    }\n    return true\n}\n\nexport const ShowRoom = () => {\n\n    const collection = useMetadata();\n    const [filters, setfilters] = React.useState({});\n    const [items, setitems] = React.useState([]);\n\n    const allItems = React.useMemo(() => {\n        if (!collection) { return [] }\n        return collection.items.map(item => {\n            let m = {};\n            item.attributes.forEach(attr => m[attr.value] = 1);\n            item.attrsMap = m;\n            return item\n        })\n    }, [collection]);\n\n    React.useEffect(() => {\n        if (!collection) { return [] }\n        setitems(allItems);\n    }, [collection, allItems])\n\n    const attrGroups = React.useMemo(() => {\n        if (!collection) {\n            return\n        }\n\n        return Object.keys(collection.attributes).filter(key => key !== '历史长度').map(key => {\n            const group = collection.attributes[key];\n            return {\n                name: key,\n                attributes: Object.keys(group).map(key => {\n                    return {\n                        value: key,\n                        count: group[key],\n                        rarity: group[key] / collection.items.length\n                    }\n                }),\n            }\n        })\n    }, [collection])\n\n    const onFilterChange = React.useCallback(({ group, attrs }) => {\n        filters[group] = attrs;\n        setfilters(filters)\n        setitems(allItems.filter(item => attributeMatched(item, filters)));\n    }, [filters, allItems])\n\n\n    return (\n        <>{\n            collection ?\n                <>\n                    <div className=\"collection-meta\">\n                        <h1 className=\"title\">{collection.collection.name}</h1>\n                        <p className=\"description\">{collection.description}</p>\n                    </div>\n                    <div className=\"items-box\">\n                        <div className=\"items-filter-box\">\n                            <p className=\"items-count\">{`共${items.length}项`}</p>\n                            {\n                                attrGroups.map(group => <AttributeGroupFilter\n                                    key={group.name}\n                                    groupName={group.name}\n                                    attributes={group.attributes.sort((a, b) => a.rarity - b.rarity)}\n                                    onChange={onFilterChange} />)\n                            }\n                        </div>\n                        <div className=\"items-list\">\n                            \n                            <List allItems={items} />\n                        </div>\n\n                    </div>\n                </>\n                : <p>加载中</p>\n\n        }\n\n        </>\n    )\n}","import React from 'react';\n\n\nexport const WalletGuide = () => {\n    return (\n        <>\n            <h1>Metamask小狐狸钱包使用指南</h1>\n        </>\n    )\n}","import React from 'react';\n\n\nexport const BscGuide = () => {\n    return (\n        <>\n            <h1>Bsc配置指南</h1>\n        </>\n    )\n}","import React from \"react\";\nimport Providers from \"./Providers\";\nimport { HomeView } from \"./views/Home/Home\";\nimport { Profile } from './views/profile';\nimport { ShowRoom } from './views/showroom';\nimport { WalletGuide } from './views/guide/WalletGuide';\nimport { BscGuide } from './views/guide/BscGuide';\n\nimport { HashRouter, Route, Routes } from \"react-router-dom\";\n\nfunction CustomRoutes() {\n    return (\n        <HashRouter basename={'/'}>\n            <Providers>\n                <Routes>\n                    <Route exact path=\"/profile\" element={<Profile />} />\n                    <Route exact path=\"/guide/wallet\" element={<WalletGuide />} />\n                    <Route exact path=\"/guide/bsc\" element={<BscGuide />} />\n                    <Route exact path=\"/showroom\" element={<ShowRoom />} />\n                    <Route path=\"/\" element={<HomeView />} />\n                </Routes>\n            </Providers>\n        </HashRouter>\n    )\n}\n\nexport default CustomRoutes;"],"sourceRoot":""}